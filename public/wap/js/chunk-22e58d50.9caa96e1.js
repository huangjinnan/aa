(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-22e58d50"],{"1b3c":function(t,e,n){n("98be"),n("4d6c"),t.exports=n("d317")},"3f62":function(t,e,n){"use strict";var a=n("6c85"),i=n.n(a);function s(t){if(i()(t))return t}var r=n("77fe"),o=n.n(r);function c(t,e){var n=[],a=!0,i=!1,s=void 0;try{for(var r,c=o()(t);!(a=(r=c.next()).done);a=!0)if(n.push(r.value),e&&n.length===e)break}catch(h){i=!0,s=h}finally{try{a||null==c["return"]||c["return"]()}finally{if(i)throw s}}return n}function h(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function u(t,e){return s(t)||c(t,e)||h()}n.d(e,"a",function(){return u})},"6e78":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"signin"},[n("navbar",{attrs:{text:"签到"}}),t.datas.score?n("scroller",[n("div",{staticClass:"signin-hd g-flex"},[n("p",{staticClass:"g-flex__item"},[n("span",{staticClass:"f-font-sm"},[t._v("可用积分：")]),t._v(t._s(t.datas.score)+"\n        ")]),n("p",[n("span",{staticClass:"f-font-sm"},[t._v("已签到：")]),t._v(t._s(t.datas.sign_count||0)+"\n          "),n("span",{staticClass:"f-font-sm"},[t._v("次")])])]),n("Calendar",{attrs:{markDate:t.markDate}}),n("div",{staticClass:"signin-btn--wrap"},[n("div",{staticClass:"g-flex__item signin-btn__item signin-btn__item--record",on:{click:t.openSignRecord}},[n("van-icon",{attrs:{name:"todo-list-o"}}),n("p",[t._v("签到记录")])],1),t.isSignin?n("div",{staticClass:"signin-btn signin-btn--used"},[t._v("已签到")]):n("div",{staticClass:"signin-btn",on:{click:t.goSignin}},[t._v("签到")]),n("div",{staticClass:"g-flex__item signin-btn__item signin-btn__item--psp",on:{click:t.openRecordPsp}},[n("van-icon",{attrs:{name:"points\n"}}),n("p",[t._v("积分攻略")])],1)])],1):t._e(),n("popupRight",{attrs:{popupData:t.recordPspData,isPopup:t.isPspPopup,popupTitle:"积分攻略"},on:{closePopup:function(e){t.isPspPopup=!1}}}),n("popupRight",{attrs:{popupData:t.signHint,isPopup:t.isSiginPopup},on:{closePopup:function(e){t.isSiginPopup=!1}}}),n("van-popup",{attrs:{position:"right"},model:{value:t.isRecordPopup,callback:function(e){t.isRecordPopup=e},expression:"isRecordPopup"}},[n("div",{staticClass:"navbar"},[n("p",{staticClass:"navbar-icon_left iconfont icon-fanhui",on:{click:function(e){t.isRecordPopup=!1}}}),n("p",{staticClass:"navbar-title overflow-dot_row"},[t._v("签到记录")])]),n("div",{staticClass:"integral-record"},[n("div",{staticClass:"table"},[n("div",{staticClass:"table-head"},[n("p",{staticClass:"table-th"},[t._v("详情")]),n("p",{staticClass:"table-th"},[t._v("日期")]),n("p",{staticClass:"table-th"},[t._v("积分")])]),n("div",{staticClass:"table-body"},t._l(t.signData,function(e,a){return n("div",{key:a,staticClass:"table-tr"},[n("div",{staticClass:"table-td"},[t._v("签到得积分")]),n("div",{staticClass:"table-td"},[t._v(t._s(e.sTime))]),n("div",{staticClass:"table-td"},[t._v(t._s(e.score))])])}),0)])])])],1)},i=[],s=(n("4453"),n("ee95")),r=n("7c15"),o=n("ed08"),c=n("a4c0"),h=n("9d8d"),u=n("8386"),d=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"wh_container"},[n("div",{staticClass:"wh_content_all"},[n("div",{staticClass:"wh_top_changge"},[n("li",{on:{click:function(e){return t.PreMonth(t.myDate,!1)}}},[n("div",{staticClass:"wh_jiantou1"})]),n("li",{staticClass:"wh_content_li"},[t._v(t._s(t.dateTop))]),n("li",{on:{click:function(e){return t.NextMonth(t.myDate,!1)}}},[n("div",{staticClass:"wh_jiantou2"})])]),n("div",{staticClass:"wh_content"},t._l(t.textTop,function(e){return n("div",{staticClass:"wh_content_item"},[n("div",{staticClass:"wh_top_tag"},[t._v(t._s(e))])])}),0),n("div",{staticClass:"wh_content"},t._l(t.list,function(e,a){return n("div",{staticClass:"wh_content_item",on:{click:function(n){return t.clickDay(e,a)}}},[n("div",{staticClass:"wh_item_date",class:[{wh_isMark:e.isMark},{wh_other_dayhide:"nowMonth"!==e.otherMonth},{wh_want_dayhide:e.dayHide},{wh_isToday:e.isToday},{wh_chose_day:e.chooseDay},t.setClass(e)]},[t._v(t._s(e.id))])])}),0)])])},l=[],p=n("77fe"),g=n.n(p),f=n("3f62"),v=n("417d"),m=(n("f91a"),n("96f8")),y=n.n(m),D=(n("ea65"),{getDaysInOneMonth:function(t){var e=t.getFullYear(),n=t.getMonth()+1,a=new Date(e,n,0);return a.getDate()},getMonthweek:function(t){var e=t.getFullYear(),n=t.getMonth()+1,a=new Date(e+"/"+n+"/1");return this.sundayStart?0==a.getDay()?7:a.getDay():0==a.getDay()?6:a.getDay()-1},getOtherMonth:function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"nextMonth",a=this.dateFormat(t).split("/"),i=a[0],s=a[1],r=a[2],o=i;"nextMonth"===n?(e=y()(s)+1,13==e&&(o=y()(o)+1,e=1)):(e=y()(s)-1,0==e&&(o=y()(o)-1,e=12));var c=r,h=new Date(o,e,0).getDate();c>h&&(c=h),e<10&&(e="0"+e),c<10&&(c="0"+c);var u=o+"/"+e+"/"+c;return new Date(u)},getLeftArr:function(t){for(var e=[],n=this.getMonthweek(t),a=this.getDaysInOneMonth(this.getOtherMonth(t,"preMonth"))-n+1,i=this.getOtherMonth(t,"preMonth"),s=0;s<n;s++){var r=i.getFullYear()+"/"+(i.getMonth()+1)+"/"+(a+s);e.push({id:a+s,date:r,isToday:!1,otherMonth:"preMonth"})}return e},getRightArr:function(t){for(var e=[],n=this.getOtherMonth(t,"nextMonth"),a=this.getDaysInOneMonth(t)+this.getMonthweek(t),i=7-a%7,s=0;s<i;s++){var r=n.getFullYear()+"/"+(n.getMonth()+1)+"/"+(s+1);e.push({id:s+1,date:r,isToday:!1,otherMonth:"nextMonth"})}return e},dateFormat:function(t){return t="string"===typeof t?new Date(t.replace(/\-/g,"/")):t,t.getFullYear()+"/"+(t.getMonth()+1)+"/"+t.getDate()},getMonthListNoOther:function(t){for(var e=[],n=this.getDaysInOneMonth(t),a=t.getFullYear(),i=t.getMonth()+1,s=this.dateFormat(new Date),r=0;r<n;r++){var o=a+"/"+i+"/"+(r+1);e.push({id:r+1,date:o,isToday:s===o,otherMonth:"nowMonth"})}return e},getMonthList:function(t){return[].concat(Object(v["a"])(this.getLeftArr(t)),Object(v["a"])(this.getMonthListNoOther(t)),Object(v["a"])(this.getRightArr(t)))},sundayStart:!1}),_={data:function(){return{myDate:[],list:[],historyChose:[],dateTop:""}},props:{markDate:{type:Array,default:function(){return[]}},markDateMore:{type:Array,default:function(){return[]}},textTop:{type:Array,default:function(){return["日","一","二","三","四","五","六"]}},sundayStart:{type:Boolean,default:function(){return!1}},agoDayHide:{type:String,default:"0"},futureDayHide:{type:String,default:"2554387200"}},created:function(){this.intStart(),this.myDate=new Date},methods:{intStart:function(){D.sundayStart=this.sundayStart},setClass:function(t){var e={};return e[t.markClassName]=t.markClassName,e},clickDay:function(t,e){"nowMonth"!==t.otherMonth||t.dayHide||this.getList(this.myDate,t.date),"nowMonth"!==t.otherMonth&&("preMonth"===t.otherMonth?this.PreMonth(t.date):this.NextMonth(t.date))},ChoseMonth:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t=D.dateFormat(t),this.myDate=new Date(t),this.$emit("changeMonth",D.dateFormat(this.myDate)),e?this.getList(this.myDate,t,e):this.getList(this.myDate)},PreMonth:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t=D.dateFormat(t),this.myDate=D.getOtherMonth(this.myDate,"preMonth"),this.$emit("changeMonth",D.dateFormat(this.myDate)),e?this.getList(this.myDate,t,e):this.getList(this.myDate)},NextMonth:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t=D.dateFormat(t),this.myDate=D.getOtherMonth(this.myDate,"nextMonth"),this.$emit("changeMonth",D.dateFormat(this.myDate)),e?this.getList(this.myDate,t,e):this.getList(this.myDate)},forMatArgs:function(){var t=this.markDate,e=this.markDateMore;return t=t.map(function(t){return D.dateFormat(t)}),e=e.map(function(t){return t.date=D.dateFormat(t.date),t}),[t,e]},getList:function(t,e){!(arguments.length>2&&void 0!==arguments[2])||arguments[2];var n=this.forMatArgs(),a=Object(f["a"])(n,2),i=a[0],s=a[1];this.dateTop="".concat(t.getFullYear(),"年").concat(t.getMonth()+1,"月");for(var r=D.getMonthList(this.myDate),o=0;o<r.length;o++){var c="",h=r[o];h.chooseDay=!1;var u=h.date,d=new Date(u).getTime()/1e3,l=!0,p=!1,v=void 0;try{for(var m,y=g()(s);!(l=(m=y.next()).done);l=!0){var _=m.value;_.date===u&&(c=_.className||"")}}catch(w){p=!0,v=w}finally{try{l||null==y.return||y.return()}finally{if(p)throw v}}h.markClassName=c,h.isMark=i.indexOf(u)>-1,h.dayHide=d<this.agoDayHide||d>this.futureDayHide,h.isToday&&this.$emit("isToday",u);var M=!h.dayHide&&"nowMonth"===h.otherMonth;e&&e===u&&M?(this.$emit("choseDay",u),this.historyChose.push(u),h.chooseDay=!0):this.historyChose[this.historyChose.length-1]===u&&!e&&M&&(h.chooseDay=!0)}this.list=r}},mounted:function(){this.getList(this.myDate)},watch:{markDate:{handler:function(t,e){this.getList(this.myDate)},deep:!0},markDateMore:{handler:function(t,e){this.getList(this.myDate)},deep:!0},agoDayHide:{handler:function(t,e){this.agoDayHide=y()(t),this.getList(this.myDate)},deep:!0},futureDayHide:{handler:function(t,e){this.futureDayHide=y()(t),this.getList(this.myDate)},deep:!0},sundayStart:{handler:function(t,e){this.intStart(),this.getList(this.myDate)},deep:!0}}},M=_,w=(n("bcb7"),n("17cc")),b=Object(w["a"])(M,d,l,!1,null,"40d05836",null),C=b.exports,k={data:function(){return{datas:[],recordPspData:"",isPspPopup:!1,isRecordPopup:!1,isSiginPopup:!1,signHint:"",signData:[],isSignin:!1,markDate:[]}},components:{navbar:h["a"],Calendar:C,popupRight:u["a"]},computed:{},methods:{openRecordPsp:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.isPspPopup=!0,t.next=3,r["a"].getScorePsp();case 3:e=t.sent,this.recordPspData=e.content;case 5:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),openSignRecord:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.isRecordPopup=!0,t.next=3,r["a"].getSignRecord();case 3:e=t.sent,e.signin_log.map(function(t){t.sTime=Object(o["i"])(t.sTime,!0)}),this.signData=e.signin_log;case 6:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),goSignin:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.isSignin=!0,this.isSiginPopup=!0,t.next=4,r["a"].goSignin();case 4:if(e=t.sent,0!=e.code){t.next=8;break}return Object(c["d"])(e.msg),t.abrupt("return",!1);case 8:new Date,this.markDate.push(this.selfYmd()),this.signHint=e.msg;case 11:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),selfYmd:function(){var t=new Date,e=t.getFullYear(),n=t.getMonth()+1,a=t.getDate();return n=n<10?"0"+n:n,a=a<10?"0"+a:a,"".concat(e,"/").concat(n,"/").concat(a)},getData:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(){var e,n,a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,r["a"].getSigninInfo();case 2:e=t.sent,this.datas=e,n=JSON.parse(e.sign_dates),n&&(a=[],n.map(function(t){var e=[t.slice(0,4),t.slice(4,6),t.slice(6,8)],n=e[0],i=e[1],s=e[2];a.push("".concat(n,"/").concat(i,"/").concat(s))}),this.markDate=a),this.datas.has_msg&&(this.isSignin=!0);case 7:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()},created:function(){this.getData()}},x=k,P=(n("c0bc"),Object(w["a"])(x,a,i,!1,null,"3e88e7ab",null));e["default"]=P.exports},"77fe":function(t,e,n){t.exports=n("1b3c")},7905:function(t,e,n){},a5bc:function(t,e,n){},bcb7:function(t,e,n){"use strict";var a=n("7905"),i=n.n(a);i.a},c0bc:function(t,e,n){"use strict";var a=n("a5bc"),i=n.n(a);i.a},d317:function(t,e,n){var a=n("0bc6"),i=n("0811");t.exports=n("836e").getIterator=function(t){var e=i(t);if("function"!=typeof e)throw TypeError(t+" is not iterable!");return a(e.call(t))}}}]);